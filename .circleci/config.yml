version: 2
jobs:
   build:
      working_directory: ~/fnrvalidator
      docker:
         - image: circleci/node:12.6.0-stretch
      steps:
         - checkout
         - run:
              name: update-npm
              command: 'sudo npm install -g npm@latest'
         - restore_cache:
              key: dependency-cache-{{ checksum "package.json" }}
         - run:
              name: install-npm-deps
              command: npm install
         - save_cache:
              key: dependency-cache-{{ checksum "package.json" }}
              paths:
                 - ./node_modules
         - run:
              name: test
              command: |
                 set -e
                 npm run test
